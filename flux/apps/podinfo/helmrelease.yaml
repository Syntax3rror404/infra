---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: podinfo
  namespace: podinfo-${environment}${tenant_suffix:-}
spec:
  interval: 30m
  chart:
    spec:
      chart: podinfo
      version: ">=6.0.0 <7.0.0"
      sourceRef:
        kind: HelmRepository
        name: podinfo
        namespace: podinfo-${environment}${tenant_suffix:-}
      interval: 12h
  values:
    replicaCount: ${replicas}
    image:
      repository: ghcr.io/stefanprodan/podinfo
      tag: "6.5.4"
    resources:
      requests:
        cpu: ${resources_cpu_request}
        memory: ${resources_memory_request}
      limits:
        cpu: ${resources_cpu_limit}
        memory: ${resources_memory_limit}
    service:
      enabled: true
      type: ClusterIP
    ui:
      color: "${{ if eq .environment \"prod\" }}#d32f2f{{ else }}#34577c{{ end }}"
      message: "${environment} Environment${tenant_suffix:-}"
    ingress:
      enabled: false